import"./modal-86d4ced0.js";const k=document.querySelector(".shopping-list"),y=localStorage.getItem("booksData"),r=L();function L(){let o;try{return o=JSON.parse(y),o}catch(e){console.error("Error:",e)}}function A(o){o.forEach(e=>{const t=document.createElement("li");t.classList.add("sl-item"),t.setAttribute("data-bookId",`${e._id}`);const n=document.createElement("img");n.setAttribute("src",`${e.book_image}`),n.setAttribute("alt",""),n.classList.add("sl-img");const a=document.createElement("div");a.classList.add("sl-info");const m=document.createElement("h3");m.classList.add("sl-book-title"),m.textContent=`${e.title}`;const p=document.createElement("p");p.classList.add("sl-book-category"),p.textContent=`${e.list_name}`;const u=document.createElement("p");u.classList.add("sl-book-description"),u.textContent=`${e.description}`;const l=document.createElement("div");l.classList.add("sl-sell-box");const g=document.createElement("p");g.classList.add("sl-book-author"),g.textContent=`${e.author}`;const c=document.createElement("div");c.classList.add("sl-book-links");const b=document.createElement("button");b.classList.add("sl-remove");const h=document.createElement("img");h.setAttribute("src","./img/png/dump.png"),h.classList.add("sl-remove-img"),k.appendChild(t),t.appendChild(b),b.appendChild(h),t.appendChild(n),t.appendChild(a),a.appendChild(m),a.appendChild(p),a.appendChild(u),a.appendChild(l),l.appendChild(g),l.appendChild(c),Array.isArray(e.buy_links)&&e.buy_links.forEach(d=>{if(d.name==="Amazon"){const s=document.createElement("a");s.setAttribute("href",d.url),s.classList.add("sl-book-link-amazon"),c.appendChild(s);const i=document.createElement("img");i.classList.add("sl-book-link-amazon-img"),i.setAttribute("src","./img/png/amazon.png"),s.appendChild(i)}}),Array.isArray(e.buy_links)&&e.buy_links.forEach(d=>{if(d.name==="Apple Books"){const s=document.createElement("a");s.setAttribute("href",d.url),s.classList.add("sl-book-link-ab"),c.appendChild(s);const i=document.createElement("img");i.classList.add("sl-book-link-ab-img"),i.setAttribute("src","./img/png/Apple books.png"),s.appendChild(i)}})})}function C(o){try{if(o!==null)Array.isArray(r)?A(r):console.error("Дані з локального сховища не є масивом.");else{const e=document.createElement("div");e.classList.add("empty-page-box");const t=document.createElement("p");t.classList.add("empty-page-text"),t.textContent="This page is empty, add some books and proceed to order.";const n=document.createElement("img");n.classList.add("empty-page-img"),n.setAttribute("src","./img/png/IMG_96061.png"),k.appendChild(e),e.appendChild(t),e.appendChild(n)}}catch(e){console.error("Помилка при розпарсюванні даних з локального сховища:",e)}}C(r);function E(){const o=document.querySelector(".hero-title"),e=document.querySelector(".sidebar");o.textContent==="Shopping List"&&(e.style.display="none")}E();const f=document.querySelector(".sl-item"),S=document.querySelectorAll(".sl-remove");S.forEach(o=>{o.addEventListener("click",e=>{const t=f.getAttribute("data-bookId");v(r,t)})});function v(o,e){const t=o.filter(a=>a._id!==e);localStorage.setItem("booksData",JSON.stringify(t));const n=document.querySelector(`[data-bookId="${e}"]`);n&&n.remove()}
